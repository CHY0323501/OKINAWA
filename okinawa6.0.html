<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>OKINAWA 2026 | 沖繩自由行規劃</title>
    
    <!-- Fonts: 使用 Playfair Display 營造雜誌感，Noto Sans TC 確保中文閱讀舒適 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Zen+Kaku+Gothic+New:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS: 快速樣式開發 -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Icons: FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Libraries: GSAP (動畫), Alpine.js (互動邏輯) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'okinawa-blue': '#008ba0',     /* 沖繩海藍 */
                        'okinawa-teal': '#2E8B57',     /* 植物園綠 */
                        'okinawa-sand': '#f6f5f1',     /* 沙灘白 */
                        'okinawa-coral': '#ff6b6b',    /* 珊瑚紅 */
                        'deep-sea': '#1a2e35',         /* 深海藍 (文字主色) */
                        'paper': '#ffffff',
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', '"Zen Kaku Gothic New"', 'sans-serif'],
                        serif: ['"Playfair Display"', 'serif'],
                    },
                    spacing: {
                        'safe-bottom': 'env(safe-area-inset-bottom)',
                    }
                }
            }
        }
    </script>

    <style>
        /* --- 核心樣式設定 --- */
        body {
            background-color: #f6f5f1;
            color: #1a2e35;
            -webkit-font-smoothing: antialiased;
        }

        /* 隱藏滾動條但保留功能 (App 質感) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* 自定義滾動條 (Desktop) */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f6f5f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #008ba0;
            border-radius: 10px;
        }

        /* 玻璃擬態效果 */
        .glass-nav {
            background: rgba(26, 46, 53, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* 文字直排 (用於裝飾) */
        .writing-vertical {
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        /* Loading 遮罩 */
        .loader-overlay {
            position: fixed;
            inset: 0;
            background: #f6f5f1;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease-out, visibility 0.8s;
        }

        /* 圖片揭示動畫遮罩 */
        .reveal-img-container {
            overflow: hidden;
            position: relative;
        }
        .reveal-img {
            transform: scale(1.15);
            transition: transform 1.6s cubic-bezier(0.165, 0.84, 0.44, 1);
            will-change: transform;
        }
        .reveal-active .reveal-img {
            transform: scale(1);
        }

        /* 禁止背景滾動 (Modal 開啟時) */
        body.overflow-hidden {
            overflow: hidden !important;
        }
    </style>
</head>
<body x-data="appData()" :class="{ 'overflow-hidden': isModalOpen }">

    <!-- Loading Screen -->
    <div class="loader-overlay" id="loader">
        <div class="flex flex-col items-center">
            <h1 class="font-serif text-6xl md:text-8xl mb-2 text-deep-sea tracking-tighter" id="loader-text">
                OKINAWA
            </h1>
            <div class="h-[1px] w-0 bg-okinawa-coral transition-all duration-700 ease-out" id="loader-line"></div>
            <p class="mt-4 text-xs tracking-[0.4em] uppercase text-gray-400" id="loader-sub">2026 Trip Guide</p>
        </div>
    </div>

    <!-- Mobile Bottom Navigation (iOS Style) -->
    <nav class="fixed bottom-0 left-0 w-full glass-nav text-white z-50 md:hidden pb-safe-bottom">
        <div class="grid grid-cols-3 h-16 items-center text-center">
            <button @click="scrollTo('hero')" class="flex flex-col items-center gap-1 opacity-70 hover:opacity-100 transition active:scale-95">
                <i class="fa-solid fa-house text-lg"></i>
                <span class="text-[10px] font-medium tracking-wide">HOME</span>
            </button>
            <button @click="scrollTo('timeline')" class="flex flex-col items-center gap-1 text-okinawa-coral transition active:scale-95">
                <i class="fa-regular fa-map text-xl"></i>
                <span class="text-[10px] font-medium tracking-wide">TRIP</span>
            </button>
            <button @click="openBudget()" class="flex flex-col items-center gap-1 opacity-70 hover:opacity-100 transition active:scale-95">
                <i class="fa-solid fa-yen-sign text-lg"></i>
                <span class="text-[10px] font-medium tracking-wide">COST</span>
            </button>
        </div>
    </nav>

    <!-- Desktop Top Navigation -->
    <nav class="fixed top-0 left-0 w-full z-50 hidden md:block transition-all duration-500 ease-in-out mix-blend-difference text-white" id="desktop-nav">
        <div class="container mx-auto px-10 py-8 flex justify-between items-center">
            <div class="text-3xl font-serif font-bold tracking-tighter">OKINAWA '26</div>
            <div class="space-x-12 text-xs font-bold tracking-[0.2em]">
                <button @click="scrollTo('hero')" class="hover:text-okinawa-coral transition decoration-wavy">HOME</button>
                <button @click="scrollTo('timeline')" class="hover:text-okinawa-coral transition">ITINERARY</button>
                <button @click="scrollTo('hotels')" class="hover:text-okinawa-coral transition">HOTELS</button>
                <button @click="openBudget()" class="hover:text-okinawa-coral transition">BUDGET</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section (Parallax) -->
    <header id="hero" class="relative w-full h-[100dvh] overflow-hidden flex items-center justify-center bg-gray-900">
        <!-- Parallax Background Image -->
        <div class="absolute inset-0 z-0">
            <!-- 替換為更穩定的沖繩海灘圖 -->
            <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=2670&auto=format&fit=crop" 
                 class="w-full h-full object-cover opacity-80 hero-bg-img" 
                 alt="Okinawa Sea"
                 onerror="this.src='https://placehold.co/1920x1080/008ba0/ffffff?text=Okinawa+Ocean'">
            <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-okinawa-sand/10"></div>
        </div>

        <div class="relative z-10 text-center px-6 mix-blend-overlay text-white">
            <p class="tracking-[0.6em] text-xs md:text-sm mb-6 animate-slide-up border border-white/30 inline-block px-4 py-2 rounded-full backdrop-blur-sm">
                APRIL 9 - 13, 2026
            </p>
            <h1 class="font-serif text-7xl md:text-[10rem] font-bold leading-none tracking-tighter mb-4 animate-scale-in">
                沖繩
            </h1>
            <span class="font-serif italic text-3xl md:text-5xl font-light block animate-slide-up delay-100 opacity-90">
                The Blue Paradise
            </span>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-24 md:bottom-12 left-1/2 -translate-x-1/2 text-white/70 animate-bounce flex flex-col items-center gap-2">
            <span class="text-[10px] tracking-[0.3em] uppercase">Scroll</span>
            <div class="w-[1px] h-12 bg-white/50"></div>
        </div>
    </header>

    <!-- Intro Text -->
    <section class="py-24 md:py-32 px-8 max-w-4xl mx-auto text-center relative">
        <span class="absolute top-10 left-10 text-9xl font-serif text-gray-100 -z-10 select-none">2026</span>
        <h2 class="font-serif text-3xl md:text-5xl text-deep-sea mb-10 leading-snug reveal-text">
            "A journey to the south,<br>where time slows down."
        </h2>
        <div class="w-16 h-1 bg-okinawa-coral mx-auto mb-10 reveal-text"></div>
        <p class="text-gray-500 leading-loose text-sm md:text-base font-light tracking-wide reveal-text delay-75">
            這是一趟屬於靈魂的逃脫。五天四夜，從北谷的日落到古宇利的碧海；從海炎祭的絢爛煙火到首里城的歷史遺跡。讓我們駕駛著車，追逐海風，紀錄下 2026 年最美的沖繩藍。
        </p>
    </section>

    <!-- Itinerary Timeline -->
    <main id="timeline" class="relative pb-32 overflow-hidden">
        <!-- Connecting Line -->
        <div class="absolute left-6 md:left-1/2 top-0 bottom-0 w-[1px] bg-gray-300 md:-translate-x-1/2 z-0"></div>

        <!-- Days Loop -->
        <template x-for="(day, index) in schedule" :key="index">
            <div class="relative z-10 mb-24 md:mb-40 day-card-trigger">
                
                <!-- Date Header Sticky -->
                <div class="sticky top-20 md:top-1/2 md:-mt-8 z-20 flex justify-start md:justify-center px-6 md:px-0 mb-6 md:mb-0 pointer-events-none">
                    <div class="bg-deep-sea text-white pl-5 pr-6 py-3 rounded-full font-serif shadow-xl flex items-center gap-4 border border-white/20 backdrop-blur-md pointer-events-auto">
                        <span class="text-3xl font-bold italic" x-text="day.dateShort"></span>
                        <div class="flex flex-col items-start leading-none">
                            <span class="text-[10px] tracking-widest uppercase opacity-70" x-text="day.month"></span>
                            <span class="text-xs font-bold tracking-wide" x-text="day.dayOfWeek"></span>
                        </div>
                    </div>
                </div>

                <!-- Content Card -->
                <div class="container mx-auto px-6">
                    <div class="flex flex-col md:flex-row items-center gap-8 md:gap-20" 
                         :class="{'md:flex-row-reverse': index % 2 !== 0}">
                        
                        <!-- Image with Interaction -->
                        <div class="w-full md:w-5/12 reveal-img-container rounded-2xl shadow-2xl overflow-hidden aspect-[4/3] cursor-pointer group relative"
                             @click="openDetail(day)">
                            <img :src="day.image" 
                                 class="w-full h-full object-cover reveal-img group-hover:scale-105 transition duration-700" 
                                 :alt="day.title"
                                 onerror="this.src='https://placehold.co/800x600/f3f4f6/a3a3a3?text=No+Image'">
                            
                            <!-- Overlay -->
                            <div class="absolute inset-0 bg-black/10 group-hover:bg-black/30 transition duration-500"></div>
                            
                            <!-- Tap Indicator -->
                            <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-300">
                                <div class="w-16 h-16 rounded-full bg-white/20 backdrop-blur-md border border-white/50 flex items-center justify-center text-white">
                                    <i class="fa-solid fa-plus text-xl"></i>
                                </div>
                            </div>
                            
                            <!-- Badge -->
                            <div class="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded text-xs font-bold tracking-widest text-deep-sea shadow-sm">
                                <span x-text="'DAY ' + (index + 1)"></span>
                            </div>
                        </div>

                        <!-- Summary Text -->
                        <div class="w-full md:w-5/12 text-left md:px-6">
                            <h3 class="font-serif text-4xl md:text-5xl mb-4 text-deep-sea leading-tight" x-text="day.title"></h3>
                            <div class="flex gap-2 mb-6">
                                <span class="px-3 py-1 bg-gray-200 rounded-full text-[10px] tracking-wider uppercase text-gray-600" x-text="day.area"></span>
                                <template x-if="day.special">
                                    <span class="px-3 py-1 bg-okinawa-coral text-white rounded-full text-[10px] tracking-wider uppercase" x-text="day.special"></span>
                                </template>
                            </div>
                            
                            <ul class="space-y-4 mb-8 border-l border-gray-200 pl-4">
                                <template x-for="highlight in day.highlights" :key="highlight">
                                    <li class="flex items-center text-gray-600 text-sm md:text-base">
                                        <span class="w-1.5 h-1.5 rounded-full bg-okinawa-blue mr-3"></span>
                                        <span x-text="highlight"></span>
                                    </li>
                                </template>
                            </ul>

                            <button @click="openDetail(day)" class="group flex items-center gap-3 text-sm tracking-[0.2em] font-bold text-deep-sea hover:text-okinawa-blue transition">
                                VIEW DETAILS
                                <i class="fa-solid fa-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </template>
    </main>

    <!-- Accommodations Section -->
    <section id="hotels" class="py-24 bg-white relative">
        <div class="container mx-auto px-6 mb-12 flex justify-between items-end">
            <div>
                <h2 class="font-serif text-4xl md:text-5xl text-deep-sea mb-2">Accommodations</h2>
                <p class="text-gray-400 text-xs tracking-[0.3em] uppercase">Relax & Recharge</p>
            </div>
            <div class="hidden md:flex gap-2 text-gray-300">
                <i class="fa-solid fa-arrow-left"></i>
                <i class="fa-solid fa-arrow-right"></i>
            </div>
        </div>
        
        <!-- Horizontal Scroll Container -->
        <div class="flex overflow-x-auto gap-6 px-6 pb-12 no-scrollbar snap-x snap-mandatory">
            <!-- Hotel 1 -->
            <div class="flex-none w-[85vw] md:w-[450px] snap-center bg-okinawa-sand rounded-2xl overflow-hidden shadow-lg group select-none">
                <div class="h-64 overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-110 transition duration-700" onerror="this.src='https://placehold.co/800x600?text=Hotel+Chatan'">
                    <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/60 to-transparent h-20"></div>
                    <span class="absolute top-4 left-4 bg-okinawa-blue text-white px-3 py-1 text-xs font-bold rounded">DAY 1</span>
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-xl text-deep-sea">La'gent Hotel</h4>
                        <span class="text-okinawa-coral font-serif text-lg">NT,180</span>
                    </div>
                    <p class="text-xs text-gray-500 mb-4 flex items-center gap-2"><i class="fa-solid fa-location-dot"></i> 沖繩北谷 (American Village)</p>
                    <p class="text-sm text-gray-600 leading-relaxed mb-4 line-clamp-2">位於美國村附近，風格活潑年輕。停車費 ¥550。</p>
                    <div class="flex gap-2 text-[10px] text-gray-400 uppercase tracking-wider">
                        <span class="border border-gray-300 px-2 py-1 rounded">Parking</span>
                        <span class="border border-gray-300 px-2 py-1 rounded">WiFi</span>
                    </div>
                </div>
            </div>

            <!-- Hotel 2 -->
            <div class="flex-none w-[85vw] md:w-[450px] snap-center bg-okinawa-sand rounded-2xl overflow-hidden shadow-lg group select-none">
                <div class="h-64 overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1571896349842-68c894913d3b?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-110 transition duration-700" onerror="this.src='https://placehold.co/800x600?text=Hotel+Vessel'">
                    <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/60 to-transparent h-20"></div>
                    <span class="absolute top-4 left-4 bg-okinawa-blue text-white px-3 py-1 text-xs font-bold rounded">DAY 2</span>
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-xl text-deep-sea">REF Okinawa Arena</h4>
                        <span class="text-okinawa-coral font-serif text-lg">NT,985</span>
                    </div>
                    <p class="text-xs text-gray-500 mb-4 flex items-center gap-2"><i class="fa-solid fa-location-dot"></i> 沖繩市 (Okinawa City)</p>
                    <p class="text-sm text-gray-600 leading-relaxed mb-4 line-clamp-2">Vessel系列，設有免費大浴場與桑拿。免費停車。</p>
                    <div class="flex gap-2 text-[10px] text-gray-400 uppercase tracking-wider">
                        <span class="border border-gray-300 px-2 py-1 rounded">Sauna</span>
                        <span class="border border-gray-300 px-2 py-1 rounded">Free Parking</span>
                    </div>
                </div>
            </div>

            <!-- Hotel 3 -->
            <div class="flex-none w-[85vw] md:w-[450px] snap-center bg-okinawa-sand rounded-2xl overflow-hidden shadow-lg group select-none">
                <div class="h-64 overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?q=80&w=2670&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-110 transition duration-700" onerror="this.src='https://placehold.co/800x600?text=Hotel+Naha'">
                    <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/60 to-transparent h-20"></div>
                    <span class="absolute top-4 left-4 bg-okinawa-blue text-white px-3 py-1 text-xs font-bold rounded">DAY 3-4</span>
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-xl text-deep-sea">La'gent Hotel Naha</h4>
                        <span class="text-okinawa-coral font-serif text-lg">NT,100</span>
                    </div>
                    <p class="text-xs text-gray-500 mb-4 flex items-center gap-2"><i class="fa-solid fa-location-dot"></i> 那霸 (Naha City)</p>
                    <p class="text-sm text-gray-600 leading-relaxed mb-4 line-clamp-2">位於那霸市中心，交通便利。機械停車場 ¥1500。</p>
                    <div class="flex gap-2 text-[10px] text-gray-400 uppercase tracking-wider">
                        <span class="border border-gray-300 px-2 py-1 rounded">City Center</span>
                        <span class="border border-gray-300 px-2 py-1 rounded">Clean</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-deep-sea text-white py-20 px-6 mb-16 md:mb-0 relative overflow-hidden">
        <div class="absolute top-0 right-0 opacity-10 font-serif text-[15rem] leading-none -translate-y-1/2 translate-x-1/3 pointer-events-none">END</div>
        
        <div class="container mx-auto text-center relative z-10">
            <h2 class="font-serif text-4xl md:text-6xl mb-6 tracking-tight">Safe Travels</h2>
            <div class="w-20 h-[1px] bg-white/30 mx-auto mb-12"></div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 text-sm opacity-80 font-light max-w-4xl mx-auto">
                <div class="space-y-2">
                    <h5 class="uppercase tracking-widest font-bold text-white mb-4 border-b border-white/20 pb-2 inline-block">Flight Out</h5>
                    <p class="text-lg">Tigerair IT230</p>
                    <p class="font-mono text-xs">06:50 TPE <i class="fa-solid fa-arrow-right mx-1 text-[10px]"></i> 09:20 OKA</p>
                </div>
                <div class="space-y-2">
                    <h5 class="uppercase tracking-widest font-bold text-white mb-4 border-b border-white/20 pb-2 inline-block">Car Rental</h5>
                    <p class="text-lg">OTS Rent-a-car</p>
                    <p class="font-mono text-xs">Rinku Toyosaki Branch</p>
                </div>
                <div class="space-y-2">
                    <h5 class="uppercase tracking-widest font-bold text-white mb-4 border-b border-white/20 pb-2 inline-block">Flight In</h5>
                    <p class="text-lg">StarLux JX871</p>
                    <p class="font-mono text-xs">20:10 OKA <i class="fa-solid fa-arrow-right mx-1 text-[10px]"></i> 20:50 TPE</p>
                </div>
            </div>
            
            <p class="text-xs text-gray-500 mt-20">&copy; 2026 Okinawa Itinerary Designed for You.</p>
        </div>
    </footer>

    <!-- Detail Modal (Full Screen App Style) -->
    <div x-show="activeDay" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 translate-y-full md:translate-y-10 md:opacity-0"
         x-transition:enter-end="opacity-100 translate-y-0 md:opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 translate-y-full md:translate-y-10 md:opacity-0"
         class="fixed inset-0 z-[100] flex items-end md:items-center justify-center pointer-events-none"
         style="display: none;">
        
        <!-- Backdrop -->
        <div x-show="activeDay" 
             x-transition.opacity 
             class="absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto"
             @click="closeDetail()"></div>

        <!-- Modal Card -->
        <div class="bg-[#fcfcfc] w-full h-[92vh] md:h-[85vh] md:w-[600px] rounded-t-3xl md:rounded-2xl shadow-2xl overflow-hidden relative flex flex-col pointer-events-auto transform transition-transform">
            
            <!-- Header Image -->
            <div class="relative h-56 md:h-64 shrink-0">
                <img :src="activeDay?.image" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/800x600?text=Okinawa'">
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                
                <!-- Close Button -->
                <button @click="closeDetail()" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-black/20 backdrop-blur text-white flex items-center justify-center hover:bg-black/40 transition z-20">
                    <i class="fa-solid fa-xmark text-lg"></i>
                </button>

                <!-- Title Overlay -->
                <div class="absolute bottom-6 left-6 text-white z-10">
                    <div class="flex items-center gap-3 mb-1">
                        <span class="bg-okinawa-coral px-2 py-0.5 rounded text-[10px] font-bold tracking-widest uppercase">DAY <span x-text="activeDay?.index + 1"></span></span>
                        <span class="text-xs font-mono opacity-80" x-text="activeDay?.dateFull"></span>
                    </div>
                    <h3 class="font-serif text-3xl md:text-4xl leading-none" x-text="activeDay?.title"></h3>
                </div>
            </div>

            <!-- Content Scroll Area -->
            <div class="flex-grow overflow-y-auto px-6 py-8 custom-scrollbar">
                
                <!-- Timeline List -->
                <div class="relative border-l-2 border-dotted border-gray-300 ml-2 space-y-12 pb-8">
                    <template x-for="(item, i) in activeDay?.details" :key="i">
                        <div class="pl-8 relative group">
                            <!-- Timeline Dot -->
                            <div class="absolute -left-[9px] top-1.5 w-4 h-4 rounded-full bg-white border-[3px] border-okinawa-blue shadow-sm z-10 group-hover:scale-125 transition"></div>
                            
                            <div class="flex items-baseline gap-3 mb-1">
                                <span class="text-okinawa-blue font-mono font-bold text-sm tracking-wide" x-text="item.time"></span>
                                <h4 class="font-bold text-lg text-deep-sea" x-text="item.activity"></h4>
                            </div>
                            
                            <p class="text-sm text-gray-600 mb-3 leading-relaxed font-light" x-show="item.desc" x-text="item.desc"></p>

                            <!-- Action Chips -->
                            <div class="flex flex-wrap gap-2">
                                <template x-if="item.mapcode">
                                    <button @click="copyToClipboard(item.mapcode, 'Mapcode')" class="bg-white border border-gray-200 pl-2 pr-3 py-1.5 rounded-lg text-xs font-mono text-gray-600 flex items-center gap-2 hover:border-okinawa-blue hover:text-okinawa-blue active:bg-gray-50 transition shadow-sm">
                                        <i class="fa-solid fa-map-location-dot text-okinawa-blue"></i>
                                        <span x-text="item.mapcode"></span>
                                    </button>
                                </template>
                                <template x-if="item.tel">
                                    <button @click="copyToClipboard(item.tel, '電話號碼')" class="bg-white border border-gray-200 pl-2 pr-3 py-1.5 rounded-lg text-xs font-mono text-gray-600 flex items-center gap-2 hover:border-green-600 hover:text-green-600 active:bg-gray-50 transition shadow-sm">
                                        <i class="fa-solid fa-phone text-green-600"></i>
                                        <span x-text="item.tel"></span>
                                    </button>
                                </template>
                            </div>
                        </div>
                    </template>
                </div>

                <!-- Stay Info -->
                <div class="mt-8 bg-slate-50 p-6 rounded-xl border border-gray-100">
                    <h5 class="text-[10px] uppercase tracking-widest text-gray-400 mb-2 font-bold"><i class="fa-solid fa-bed mr-1"></i> Tonight's Stay</h5>
                    <p class="font-serif text-xl text-deep-sea mb-1" x-text="activeDay?.stay"></p>
                    <p class="text-xs text-gray-500" x-text="activeDay?.stayNote"></p>
                </div>
            </div>

            <!-- Bottom Safe Area (Mobile) -->
            <div class="h-6 md:h-0 w-full bg-[#fcfcfc]"></div>
        </div>
    </div>

    <!-- Budget Modal -->
    <div x-show="showBudget" 
         class="fixed inset-0 z-[100] flex items-center justify-center p-4 pointer-events-none"
         style="display: none;">
         
        <div x-show="showBudget" class="absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto" @click="closeBudget()"></div>
        
        <div x-show="showBudget" 
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0 scale-95"
             x-transition:enter-end="opacity-100 scale-100"
             class="bg-white w-full max-w-md rounded-2xl shadow-2xl z-10 overflow-hidden relative pointer-events-auto">
             
             <!-- Header -->
             <div class="bg-deep-sea p-6 text-white flex justify-between items-start relative overflow-hidden">
                <div class="absolute -right-4 -top-4 text-white/5 text-9xl font-serif">¥</div>
                <div class="relative z-10">
                    <h2 class="font-serif text-3xl">Estimated Cost</h2>
                    <p class="text-sm opacity-70">Based on 2026 plan</p>
                </div>
                <button @click="closeBudget()" class="relative z-10 w-8 h-8 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 transition">
                    <i class="fa-solid fa-xmark text-sm"></i>
                </button>
             </div>
             
             <!-- List -->
             <div class="p-6">
                <div class="space-y-5">
                    <!-- Item -->
                    <div class="flex justify-between items-center group">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition"><i class="fa-solid fa-plane"></i></div>
                            <div>
                                <p class="font-bold text-sm text-deep-sea">機票</p>
                                <p class="text-[10px] text-gray-400">虎航 + 星宇</p>
                            </div>
                        </div>
                        <span class="font-mono font-medium text-deep-sea">NT,299</span>
                    </div>

                    <div class="flex justify-between items-center group">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 rounded-full bg-orange-50 text-orange-600 flex items-center justify-center group-hover:bg-orange-600 group-hover:text-white transition"><i class="fa-solid fa-bed"></i></div>
                            <div>
                                <p class="font-bold text-sm text-deep-sea">住宿</p>
                                <p class="text-[10px] text-gray-400">4 晚 / 人</p>
                            </div>
                        </div>
                        <span class="font-mono font-medium text-deep-sea">NT,183</span>
                    </div>

                    <div class="flex justify-between items-center group">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 rounded-full bg-green-50 text-green-600 flex items-center justify-center group-hover:bg-green-600 group-hover:text-white transition"><i class="fa-solid fa-car"></i></div>
                            <div>
                                <p class="font-bold text-sm text-deep-sea">交通</p>
                                <p class="text-[10px] text-gray-400">租車分攤 + 油資</p>
                            </div>
                        </div>
                        <span class="font-mono font-medium text-deep-sea">~ NT,500</span>
                    </div>

                    <div class="flex justify-between items-center group">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition"><i class="fa-solid fa-ticket"></i></div>
                            <div>
                                <p class="font-bold text-sm text-deep-sea">門票</p>
                                <p class="text-[10px] text-gray-400">海炎祭 + Pass</p>
                            </div>
                        </div>
                        <span class="font-mono font-medium text-deep-sea">~ NT,000</span>
                    </div>
                </div>

                <!-- Total -->
                <div class="mt-8 pt-6 border-t border-gray-100 text-center">
                    <p class="text-[10px] text-gray-400 uppercase tracking-widest mb-1">Total Estimated</p>
                    <p class="text-4xl font-serif text-deep-sea font-bold">NT$ 23,000</p>
                    <p class="text-[10px] text-red-400 mt-2 bg-red-50 inline-block px-2 py-1 rounded">*不含餐食購物</p>
                </div>
             </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-6 left-1/2 transform -translate-x-1/2 bg-deep-sea text-white pl-4 pr-6 py-3 rounded-full shadow-2xl z-[200] transition-all duration-300 opacity-0 translate-y-[-20px] flex items-center gap-3 pointer-events-none scale-90">
        <div class="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-xs">
            <i class="fa-solid fa-check"></i>
        </div>
        <div class="flex flex-col">
            <span class="text-xs font-bold" id="toast-title">已複製</span>
            <span class="text-[10px] opacity-80" id="toast-msg">內容已儲存至剪貼簿</span>
        </div>
    </div>

    <!-- Logic Script -->
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('appData', () => ({
                activeDay: null,
                showBudget: false,
                isModalOpen: false,
                schedule: [
                    {
                        index: 0,
                        dateShort: "09",
                        month: "APR",
                        dateFull: "2026/04/09",
                        dayOfWeek: "Thursday",
                        title: "Arrival & Sunset",
                        area: "中部 / 北谷",
                        image: "https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?q=80&w=2670&auto=format&fit=crop", /* Camping/Outdoor sunset vibe suitable for American Village mood */
                        stay: "沖繩北谷柔婕閣酒店",
                        stayNote: "¥550/晚 (對面24h停車場 ¥400)",
                        highlights: ["虎航 IT230 早班機", "OTS 臨空豐崎取車", "PARCO CITY 午餐", "美國村日落"],
                        details: [
                            { time: "06:50", activity: "桃園機場起飛", desc: "Tigerair IT230 (09:20 抵達那霸)" },
                            { time: "11:00", activity: "OTS 取車", desc: "臨空豐崎營業所，檢查車況", mapcode: "232 543 502*14" },
                            { time: "12:00", activity: "PARCO CITY", desc: "午餐時間 & 購物 (約40分車程)" },
                            { time: "15:00", activity: "飯店 Check-in", desc: "沖繩北谷柔婕閣酒店 (14:00可入住)", tel: "+8198-926-0210", mapcode: "33555055*26" },
                            { time: "18:00", activity: "美國村晚餐", desc: "自由活動，商店約 20:00 關門" }
                        ]
                    },
                    {
                        index: 1,
                        dateShort: "10",
                        month: "APR",
                        dateFull: "2026/04/10",
                        dayOfWeek: "Friday",
                        title: "Azure Ocean Drive",
                        area: "北部 / 名護",
                        image: "https://images.unsplash.com/photo-1542051841857-5f90071e7989?q=80&w=2670&auto=format&fit=crop", /* Japan iconic vibe */
                        stay: "REF 沖繩競技場 Vessel",
                        stayNote: "免費停車、大浴場桑拿",
                        highlights: ["豬排蛋飯糰", "古宇利藍", "美麗海水族館", "東南植物樂園燈光秀"],
                        details: [
                            { time: "07:00", activity: "早餐：豬排蛋飯糰", desc: "北谷店 (走路10分)" },
                            { time: "09:00", activity: "出發往北部", desc: "沿途欣賞西海岸風景 (約1小時)" },
                            { time: "10:30", activity: "古宇利島", desc: "古宇利大橋、海灘踏浪、蝦蝦飯" },
                            { time: "13:00", activity: "海洋博公園", desc: "美麗海水族館 (鯨鯊餵食 15:00/17:00)", mapcode: "553 075 797*77" },
                            { time: "16:30", activity: "點心：A&W 漢堡", desc: "名護店，體驗美式復古風情" },
                            { time: "18:00", activity: "東南植物樂園", desc: "夜間燈光秀 (17:00-22:00)" },
                            { time: "21:00", activity: "入住 REF Vessel", desc: "沖繩市，享受大浴場", tel: "098-933-6111" }
                        ]
                    },
                    {
                        index: 2,
                        dateShort: "11",
                        month: "APR",
                        dateFull: "2026/04/11",
                        dayOfWeek: "Saturday",
                        title: "Ryukyu Fireworks",
                        area: "南部 / 宜野灣",
                        special: "琉球海炎祭",
                        image: "https://images.unsplash.com/photo-1506260408121-e353d10b87c7?q=80&w=2656&auto=format&fit=crop", /* Fireworks */
                        stay: "La'gent Hotel Naha",
                        stayNote: "停車費 ¥1500 (機械式，注意車高)",
                        highlights: ["玉泉洞王國村", "奧武島貓咪與天婦羅", "海炎祭震撼煙火"],
                        details: [
                            { time: "09:00", activity: "玉泉洞王國村", desc: "探索鐘乳石洞與琉球文化" },
                            { time: "12:00", activity: "午餐時光", desc: "蕎蕎蕎 (蕎麥麵) -> 奧武島天婦羅" },
                            { time: "15:00", activity: "海炎祭入場", desc: "宜野灣海濱公園 (注意停車與接駁)" },
                            { time: "19:00", activity: "★ 煙火施放", desc: "琉球海炎祭 (19:00-20:00)" },
                            { time: "21:30", activity: "那霸市區入住", desc: "La'gent Hotel Naha / 宵夜：鳥貴族", tel: "+81-98-894-5600" }
                        ]
                    },
                    {
                        index: 3,
                        dateShort: "12",
                        month: "APR",
                        dateFull: "2026/04/12",
                        dayOfWeek: "Sunday",
                        title: "City & Chill",
                        area: "那霸 / 豐見城",
                        image: "https://images.unsplash.com/photo-1528164344705-475426879893?q=80&w=2670&auto=format&fit=crop", /* Japanese Shrine vibe */
                        stay: "La'gent Hotel Naha",
                        stayNote: "續住一晚，放鬆行程",
                        highlights: ["波上宮懸崖神社", "泊港魚市場海鮮", "瀨長島夕陽", "Outlet 購物"],
                        details: [
                            { time: "09:00", activity: "波上宮", desc: "參拜與波之上海灘散步" },
                            { time: "11:00", activity: "泊港魚市場", desc: "午餐：大國海產 (生魚片/海鮮丼)" },
                            { time: "13:00", activity: "瀨長島", desc: "Umikaji Terrace 希臘風情下午茶" },
                            { time: "15:30", activity: "Outlet 購物", desc: "ASHIBINAA 或 iias 豐崎" },
                            { time: "19:00", activity: "OTS 還車", desc: "臨空豐崎營業所 (記得加滿油)" },
                            { time: "20:00", activity: "國際通", desc: "搭單軌回市區，DFS免稅店、逛街" }
                        ]
                    },
                    {
                        index: 4,
                        dateShort: "13",
                        month: "APR",
                        dateFull: "2026/04/13",
                        dayOfWeek: "Monday",
                        title: "Heritage & Home",
                        area: "那霸 / 首里",
                        image: "https://images.unsplash.com/photo-1599827670355-326b0142b654?q=80&w=2670&auto=format&fit=crop", /* Shuri Castle red vibe */
                        stay: "溫暖的家",
                        stayNote: "星宇 JX871",
                        highlights: ["首里城歷史巡禮", "達摩寺祈福", "最後伴手禮", "前往機場"],
                        details: [
                            { time: "10:00", activity: "Check-out", desc: "單軌美榮橋站 -> 首里站" },
                            { time: "10:30", activity: "首里城", desc: "漫步世界文化遺產公園" },
                            { time: "12:00", activity: "西來院達摩寺", desc: "祈求好運" },
                            { time: "13:30", activity: "國際通最後衝刺", desc: "午餐 & 採買漏掉的伴手禮" },
                            { time: "17:00", activity: "前往那霸機場", desc: "單軌前往 (建議提早3小時)" },
                            { time: "20:10", activity: "起飛返台", desc: "StarLux JX871 (20:50 抵達桃園)" }
                        ]
                    }
                ],
                
                scrollTo(id) {
                    const el = document.getElementById(id);
                    if (el) el.scrollIntoView({ behavior: 'smooth' });
                },

                openDetail(day) {
                    this.activeDay = day;
                    this.isModalOpen = true; // Lock scroll
                },

                closeDetail() {
                    this.activeDay = null;
                    this.isModalOpen = false; // Unlock scroll
                },

                openBudget() {
                    this.showBudget = true;
                    this.isModalOpen = true;
                },

                closeBudget() {
                    this.showBudget = false;
                    this.isModalOpen = false;
                },

                async copyToClipboard(text, type) {
                    try {
                        await navigator.clipboard.writeText(text);
                        this.showToast(type);
                    } catch (err) {
                        // Fallback for older browsers or non-secure contexts
                        const textArea = document.createElement("textarea");
                        textArea.value = text;
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand('copy');
                            this.showToast(type);
                        } catch (err) {
                            console.error('Copy failed', err);
                            alert('複製失敗，請手動複製: ' + text);
                        }
                        document.body.removeChild(textArea);
                    }
                },

                showToast(title) {
                    const toast = document.getElementById('toast');
                    const titleEl = document.getElementById('toast-title');
                    const msgEl = document.getElementById('toast-msg');
                    
                    titleEl.innerText = title + " 已複製";
                    msgEl.innerText = "內容已儲存至剪貼簿";
                    
                    toast.classList.remove('opacity-0', 'translate-y-[-20px]', 'scale-90');
                    toast.classList.add('opacity-100', 'translate-y-0', 'scale-100');
                    
                    setTimeout(() => {
                        toast.classList.remove('opacity-100', 'translate-y-0', 'scale-100');
                        toast.classList.add('opacity-0', 'translate-y-[-20px]', 'scale-90');
                    }, 2000);
                }
            }))
        });

        // Animation System
        window.onload = function() {
            // Loader Animation sequence
            const line = document.getElementById('loader-line');
            const text = document.getElementById('loader-text');
            const sub = document.getElementById('loader-sub');
            const loader = document.getElementById('loader');

            // 1. Line expands
            setTimeout(() => {
                line.style.width = '80px';
            }, 100);

            // 2. Fade out loader and init GSAP
            setTimeout(() => {
                loader.style.opacity = '0';
                loader.style.visibility = 'hidden';
                initGSAP();
            }, 1500);
        };

        function initGSAP() {
            gsap.registerPlugin(ScrollTrigger);

            // Hero Elements
            gsap.from(".animate-slide-up", { 
                y: 30, opacity: 0, duration: 1.2, ease: "power3.out", stagger: 0.2 
            });
            gsap.from(".animate-scale-in", { 
                scale: 0.9, opacity: 0, duration: 1.5, ease: "power2.out", delay: 0.3 
            });

            // Parallax Background
            gsap.to(".hero-bg-img", {
                yPercent: 30,
                ease: "none",
                scrollTrigger: {
                    trigger: "#hero",
                    start: "top top",
                    end: "bottom top",
                    scrub: true
                }
            });

            // Reveal Text on Scroll
            gsap.utils.toArray(".reveal-text").forEach(text => {
                gsap.from(text, {
                    y: 40,
                    opacity: 0,
                    duration: 1.2,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: text,
                        start: "top 85%",
                        toggleActions: "play none none reverse"
                    }
                });
            });

            // Image Reveal Interaction
            gsap.utils.toArray(".reveal-img-container").forEach(container => {
                ScrollTrigger.create({
                    trigger: container,
                    start: "top 80%",
                    onEnter: () => container.classList.add("reveal-active"),
                    onLeaveBack: () => container.classList.remove("reveal-active")
                });
            });

            // Navbar Hide/Show on Scroll
            let lastScroll = 0;
            const nav = document.getElementById('desktop-nav');
            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                if (currentScroll > 100) {
                    nav.classList.add('bg-deep-sea/90', 'backdrop-blur-md', 'py-4', 'shadow-lg');
                    nav.classList.remove('py-8', 'mix-blend-difference');
                } else {
                    nav.classList.remove('bg-deep-sea/90', 'backdrop-blur-md', 'py-4', 'shadow-lg');
                    nav.classList.add('py-8', 'mix-blend-difference');
                }
                lastScroll = currentScroll;
            });
        }
    </script>
</body>
</html>

